---
date: 2025-10-30 23:55:16
title: 图床搭建
permalink: /ImgBed/e5bf81
coverImg: "https://b770a0f3.cloudflare-imgbed-8mr.pages.dev/file/bg/3.jpg"
description: 自建图床实现无限存储
---


# 图床搭建

## [CloudFlare ImgBed](https://github.com/MarSeventh/CloudFlare-ImgBed)
🗂️开源文件托管解决方案，支持 Docker 和无服务器部署，支持 Telegram Bot 、 Cloudflare R2 、S3 等多种存储渠道，支持 WebDAV 协议和多种 RESTful API, 本文以Telegram Channel渠道为例演示搭建图床

**支持多样化复制方式:** 
- **原始链接:** `URL 直接的文件访问链接`
- **Markdown:** `![](图片链接)` 
- **HTML:** `<img src="图片链接">` 
- **BBCode:** `[img]图片链接[/img]`

![多种复制格式.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/多种复制格式.png)

## 成果展示

[我的图床](https://cloudflare-imgbed-8mr.pages.dev/)

![PixPin_2025-10-31_16-31-55.gif](https://cloudflare-imgbed-8mr.pages.dev/file/img/PixPin_2025-10-31_16-31-55.gif)

## 存储渠道
> Telegram渠道大于20MB文件会分片存储.

|     渠道类型      |  文件大小限制  |     费用       |        特点        |
| :--------------: | :-----------: | :-----------:  | :----------------: |
|   Telegram Bot   |     无限制     |     免费       |  稳定可靠，支持压缩  |
|   Cloudflare R2  |     无限制     | 10GB用量内免费  |   高性能，企业级    |

## 部署指南

### Telegram Bot 渠道

1. 获取 **TG_BOT_TOKEN**
    - 在 Telegram 中搜索 [@BotFather](https://t.me/BotFather)
    - 发送 `/newbot` 命令
    - 按提示输入 Bot 名称和用户名
    - 获得 <mark>Bot Token</mark>（格式：123456789:ABCdefGHIjklMNOpqrsTUVwxyz）
    ![Bot Token.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/Bot_Token.png){style="display: block; margin: 0 auto"}
2. 获取 **TG_CHAT_ID**
    - 创建一个新的 <mark>Telegram 频道</mark>（Channel）
    - 将创建的 Bot 添加为 <mark>频道管理员</mark>
    - 给予 Bot 消息管理的权限
    ![频道管理员权限.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/频道管理员权限.png)
    - 在频道中发送一条测试消息
    - 向 [@VersaToolsBot](https://t.me/VersaToolsBot) 转发这条消息
    - 获得 <mark>频道 ID</mark>（示例：-1001234567890）
    ![频道ID.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/频道ID.png)

> [!IMPORTANT] 注意
> 频道 ID 前面有 `"-"` 号时需要保留

### Cloudflare Pages 部署

1. 📂 Fork 项目
    - 访问 [CloudFlare ImgBed](https://github.com/MarSeventh/CloudFlare-ImgBed) 项目
    - 点击右上角的 <mark>Fork</mark> 按钮
    - 选择您的 GitHub 账户
    - 确认 Fork 完成

2. 🏗️ 创建 Pages 项目
    - 登录 [Cloudflare Dashboard](https://dash.cloudflare.com/)
    - 选择左侧菜单的 <mark>Workers & Pages</mark>
    - 点击 <mark>创建应用程序</mark>
    - 选择 Pages 选项卡
    - 点击 <mark>连接到 Git</mark>
    ![创建应用程序.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/创建应用程序.png)
    - 授权 Cloudflare 访问 GitHub 选择您 Fork 的 <mark>CloudFlare-ImgBed 仓库</mark>
    ![部署界面.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/部署界面.png)
    - 等待首次部署完成（约 2-3 分钟）

3. 🗄️ 配置 KV 数据库
    - 在 Cloudflare Dashboard 中选择 <mark>存储和数据库</mark>
    - 点击 <mark>Workers KV</mark>
    - 点击 <mark>创建命名空间</mark>
    - 输入命名空间名称：img_url（建议使用此名称）
    - 点击 <mark>添加</mark>
    ![Creat Workers KV.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/Creat_Workers_KV.png)

4. 🚀 绑定 KV 到项目
    - 返回您的 Pages 项目
    - 选择 "设置" → "绑定"
    - 点击 "添加" → "KV 命名空间"
    - 填写绑定信息：
        - **变量名称:** <mark>img_url</mark>（必须是这个名称）
        - **KV 命名空间:** 选择刚创建的命名空间
    - 点击 "保存"

::: note 注意
绑定 KV 时，变量名称必须为 `img_url`，这是项目预设的变量名，填错会出现无法进入管理界面等情况.
:::

5. 🔄 重新部署
    - 绑定数据库后需要重新部署以生效：进入项目的 "部署" 页面找到最新的部署记录点击右侧的 `"..."` 菜单,选择 <mark>重试部署</mark> , 等待部署完成.
    ![重新部署.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/重新部署.png)

## Telegram 渠道配置说明

::: danger 重要 !!!
管理后台默认无需密码，登录后请及时设置管理员用户名和密码。
:::

- 访问 CloudFlare Page 所部署好的域, 进入 <mark>"管理后台"</mark>
- 右下角菜单栏进入 <mark>"系统管理" → "系统设置" → "上传设置"</mark>
- 找到 <mark>"Telegram 渠道配置"</mark>
- 点击 <mark>"添加渠道"</mark>
- 填入准备好的 <mark>Token</mark> 和 <mark>Chat ID</mark>：
    - **渠道名称**：自定义名称（如：主渠道）
    - **Bot Token**：从 @BotFather 获得的 Token
    - **Chat ID**：频道 ID（有-号时需要保留）
    - **启用状态**：开启
- 点击 <mark>"保存设置"</mark>

![系统管理.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/系统管理.png)
![Telegram上传渠道配置.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/Telegram上传渠道配置.png)

- **原图上传:** 在 <mark>"上传设置"</mark> 中关闭 <mark>"压缩功能"</mark>

![关闭压缩功能.png](https://cloudflare-imgbed-8mr.pages.dev/file/img/关闭压缩功能.png)

